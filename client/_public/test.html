<!doctype html><html lang="de"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,minimum-scale=1"><title>Web Speech API</title><script>class STT{labels={RECORDING_STARTED:"üé§ Aufnahme l√§uft...",RECORDING_STOPPED:"‚è∏ Aufnahme gestoppt",TALK_NOW:"Sprechen Sie jetzt",BUTTON_START:"‚ñ∂Ô∏è Start",BUTTON_STOP:"‚è∏ Stop",ERROR:"‚ùå Fehler",MESSAGE_SENT:"‚úÖ Nachricht gesendet.",NOT_SUPPORTED:"‚õî Browser unterst√ºtzt keine Spracheingabe!"};init(t){this.$container=t,this.autostart=t.hasAttribute("data-autostart"),this.setupSpeech(),this.bindEvents(),this.autostart&&this.startListening()}setupSpeech(){if(this.$container.insertAdjacentHTML("beforeend",`\n                            <button class="toggle">${this.autostart?this.labels.BUTTON_STOP:this.labels.BUTTON_START}</button>\n                            <div class="status">...</div>\n                        `),this.$textarea=this.$container.querySelector("textarea"),this.$status=this.$container.querySelector(".status"),this.$toggleButton=this.$container.querySelector(".toggle"),this.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,this.isListening=!1,this.shouldRestart=!1,!this.SpeechRecognition)return this.$status.textContent=this.labels.NOT_SUPPORTED,void(this.$toggleButton.disabled=!0);this.recognition=new this.SpeechRecognition,this.recognition.lang="de-DE",this.recognition.continuous=!0,this.recognition.interimResults=!0}bindEvents(){this.recognition.onresult=t=>{let e="",s=!1;for(let i=t.resultIndex;i<t.results.length;i++){let n=t.results[i][0].transcript;t.results[i].isFinal?s=!0:e+=n}if(e){let t=e.trim();this.$textarea.value=t}s&&(this.$status.textContent=this.labels.MESSAGE_SENT,setTimeout(()=>{this.$status.textContent=this.labels.RECORDING_STARTED+" "+this.labels.TALK_NOW},1e3),this.$textarea.value="",this.$container.closest("form")&&this.$container.closest("form").dispatchEvent(new Event("submit",{bubbles:!0}))),!s&&e&&(this.$status.textContent=this.labels.RECORDING_STARTED)},this.recognition.onerror=t=>{this.$status.textContent=this.labels.ERROR+": "+t.error},this.recognition.onend=()=>{this.shouldRestart&&this.isListening&&this.recognition.start()},this.$toggleButton.addEventListener("click",()=>{this.isListening?this.stopListening():this.startListening()})}startListening(){this.shouldRestart=!0,this.isListening=!0,this.recognition.start(),this.$toggleButton.textContent=this.labels.BUTTON_STOP,this.$status.textContent=this.labels.RECORDING_STARTED+" "+this.labels.TALK_NOW}stopListening(){this.shouldRestart=!1,this.isListening=!1,this.recognition.stop(),this.$toggleButton.textContent=this.labels.BUTTON_START,this.$status.textContent=this.labels.RECORDING_STOPPED}}window.addEventListener("load",t=>{let e=new STT;null!==document.querySelector(".sst")&&document.querySelectorAll(".sst").forEach(t=>{e.init(t)})})</script><style>textarea{width:100%;height:300px;display:block}</style><form><div class="sst" data-autostart><textarea></textarea></div></form><form><div class="sst"><textarea></textarea></div></form>